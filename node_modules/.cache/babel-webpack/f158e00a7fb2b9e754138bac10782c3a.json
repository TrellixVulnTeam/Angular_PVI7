{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/mique/DAW2/M14/PROJECTE_ANGULAR/Videojocs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nlet VideojocsFavComponent = class VideojocsFavComponent {\n  constructor(VideojocsService) {\n    this.listaFav = [];\n  }\n\n  ngOnInit() {\n    this.cargarArray();\n  }\n\n  cargarArray() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const favoritos = yield localStorage.getItem('favoritos');\n\n      if (favoritos) {\n        // Comprobar que el valor del localStorage tiene algo\n        if (favoritos.length > 0) {\n          _this.listaFav = JSON.parse(favoritos); // Marcar el corazon rojo\n\n          for (const videojoc of _this.listaFav) {\n            const favorito = _this.listaFav.find(favorito => favorito.id === videojoc.id);\n\n            if (favorito) {\n              videojoc.favorito = true;\n              videojoc.active = 'active';\n            }\n          }\n        }\n      } else {\n        // Dar un mensaje en el html\n        _this.listaFav = [];\n      }\n\n      console.log(_this.listaFav);\n    })();\n  }\n\n  eliminarFav(videojoc) {\n    // Eliminar del localStorage el id y el nombre del videojoc\n    const favoritos = localStorage.getItem('favoritos');\n    let favoritosArray = [];\n\n    if (favoritos) {\n      favoritosArray = JSON.parse(favoritos);\n    }\n\n    const existe = favoritosArray.find(favorito => favorito.id === videojoc.id);\n\n    if (existe) {\n      const index = favoritosArray.indexOf(existe);\n      favoritosArray.splice(index, 1);\n    }\n\n    localStorage.setItem('favoritos', JSON.stringify(favoritosArray));\n  } // Eliminar elemento de la lista si ya no está en favoritos\n\n\n  eliminarFavLista(index, videojoc) {\n    this.listaFav.splice(index, 1); // Eliminar del localStorage el id y el nombre del videojoc\n\n    const favoritos = localStorage.getItem('favoritos');\n    let favoritosArray = [];\n\n    if (favoritos) {\n      favoritosArray = JSON.parse(favoritos);\n    }\n\n    const existe = favoritosArray.find(favorito => favorito.id === videojoc.id);\n\n    if (existe) {\n      const index = favoritosArray.indexOf(existe);\n      favoritosArray.splice(index, 1);\n    }\n\n    localStorage.setItem('favoritos', JSON.stringify(favoritosArray)); // Recargar la lista\n\n    this.cargarArray();\n  }\n\n  toggle(index) {\n    this.listaFav[index].active = this.listaFav[index].active === 'active' ? 'inactive' : 'active';\n  }\n\n};\nVideojocsFavComponent = __decorate([Component({\n  selector: 'app-videojocs-fav',\n  templateUrl: './videojocs-fav.component.html',\n  styleUrls: ['./videojocs-fav.component.css'],\n  animations: [// animacion al cargar imagen\n  trigger('fade', [state('void', style({\n    opacity: 0\n  })), transition('void => *', animate(1000))]), // Animar boton de favoritos\n  trigger('favoritos', [state('inactive', style({\n    // Dejar el corazon blanco\n    color: 'white'\n  })), state('active', style({\n    // Poner el corazon rojo\n    color: 'red'\n  })), transition('inactive => active', animate('500ms ease-in')), transition('active => inactive', animate('500ms ease-out'))])]\n})], VideojocsFavComponent);\nexport { VideojocsFavComponent };","map":{"version":3,"sources":["C:/Users/mique/DAW2/M14/PROJECTE_ANGULAR/Videojocs/src/app/videojocs/videojocs-fav/videojocs-fav.component.ts"],"names":["__decorate","Component","trigger","state","style","transition","animate","VideojocsFavComponent","constructor","VideojocsService","listaFav","ngOnInit","cargarArray","favoritos","localStorage","getItem","length","JSON","parse","videojoc","favorito","find","id","active","console","log","eliminarFav","favoritosArray","existe","index","indexOf","splice","setItem","stringify","eliminarFavLista","toggle","selector","templateUrl","styleUrls","animations","opacity","color"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport { trigger, state, style, transition, animate } from '@angular/animations';\r\nlet VideojocsFavComponent = class VideojocsFavComponent {\r\n    constructor(VideojocsService) {\r\n        this.listaFav = [];\r\n    }\r\n    ngOnInit() {\r\n        this.cargarArray();\r\n    }\r\n    async cargarArray() {\r\n        const favoritos = await localStorage.getItem('favoritos');\r\n        if (favoritos) {\r\n            // Comprobar que el valor del localStorage tiene algo\r\n            if (favoritos.length > 0) {\r\n                this.listaFav = JSON.parse(favoritos);\r\n                // Marcar el corazon rojo\r\n                for (const videojoc of this.listaFav) {\r\n                    const favorito = this.listaFav.find(favorito => favorito.id === videojoc.id);\r\n                    if (favorito) {\r\n                        videojoc.favorito = true;\r\n                        videojoc.active = 'active';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // Dar un mensaje en el html\r\n            this.listaFav = [];\r\n        }\r\n        console.log(this.listaFav);\r\n    }\r\n    eliminarFav(videojoc) {\r\n        // Eliminar del localStorage el id y el nombre del videojoc\r\n        const favoritos = localStorage.getItem('favoritos');\r\n        let favoritosArray = [];\r\n        if (favoritos) {\r\n            favoritosArray = JSON.parse(favoritos);\r\n        }\r\n        const existe = favoritosArray.find(favorito => favorito.id === videojoc.id);\r\n        if (existe) {\r\n            const index = favoritosArray.indexOf(existe);\r\n            favoritosArray.splice(index, 1);\r\n        }\r\n        localStorage.setItem('favoritos', JSON.stringify(favoritosArray));\r\n    }\r\n    // Eliminar elemento de la lista si ya no está en favoritos\r\n    eliminarFavLista(index, videojoc) {\r\n        this.listaFav.splice(index, 1);\r\n        // Eliminar del localStorage el id y el nombre del videojoc\r\n        const favoritos = localStorage.getItem('favoritos');\r\n        let favoritosArray = [];\r\n        if (favoritos) {\r\n            favoritosArray = JSON.parse(favoritos);\r\n        }\r\n        const existe = favoritosArray.find(favorito => favorito.id === videojoc.id);\r\n        if (existe) {\r\n            const index = favoritosArray.indexOf(existe);\r\n            favoritosArray.splice(index, 1);\r\n        }\r\n        localStorage.setItem('favoritos', JSON.stringify(favoritosArray));\r\n        // Recargar la lista\r\n        this.cargarArray();\r\n    }\r\n    toggle(index) {\r\n        this.listaFav[index].active = (this.listaFav[index].active) === 'active' ? 'inactive' : 'active';\r\n    }\r\n};\r\nVideojocsFavComponent = __decorate([\r\n    Component({\r\n        selector: 'app-videojocs-fav',\r\n        templateUrl: './videojocs-fav.component.html',\r\n        styleUrls: ['./videojocs-fav.component.css'],\r\n        animations: [\r\n            // animacion al cargar imagen\r\n            trigger('fade', [\r\n                state('void', style({ opacity: 0 })),\r\n                transition('void => *', animate(1000)),\r\n            ]),\r\n            // Animar boton de favoritos\r\n            trigger('favoritos', [\r\n                state('inactive', style({\r\n                    // Dejar el corazon blanco\r\n                    color: 'white',\r\n                })),\r\n                state('active', style({\r\n                    // Poner el corazon rojo\r\n                    color: 'red',\r\n                })),\r\n                transition('inactive => active', animate('500ms ease-in')),\r\n                transition('active => inactive', animate('500ms ease-out'))\r\n            ])\r\n        ]\r\n    })\r\n], VideojocsFavComponent);\r\nexport { VideojocsFavComponent };\r\n"]},"metadata":{},"sourceType":"module"}