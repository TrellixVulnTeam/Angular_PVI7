{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/mique/DAW2/M14/PROJECTE_ANGULAR/Videojocs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/viodeojocs/services/videojocs.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/slider\";\n\nfunction VidejocsInfoComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const genero_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", genero_r2.name, \" \");\n  }\n}\n\nfunction VidejocsInfoComponent_li_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const temporada_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", temporada_r3.name, \" \");\n  }\n}\n\nexport class VidejocsInfoComponent {\n  constructor(videojocsService) {\n    this.videojocsService = videojocsService;\n    this.listaVideojocs = [];\n  }\n\n  listaFavoritos() {\n    const favoritos = localStorage.getItem('favoritos');\n\n    if (favoritos) {\n      // Comprobar que el valor del localStorage tiene algo\n      if (favoritos.length > 0) {\n        return JSON.parse(favoritos);\n      }\n    }\n\n    return [];\n  }\n\n  ngOnInit() {\n    this.loadVideojocs();\n  }\n\n  loadVideojocs() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const videojocs = yield _this.videojocsService.listarVideojocs();\n      _this.listaVideojocs = videojocs.results;\n\n      for (const videojoc of _this.listaVideojocs) {\n        _this.loadDescription(videojoc);\n\n        const favorito = _this.listaFavoritos().find(favorito => favorito.id === videojoc.id);\n\n        if (favorito) {\n          videojoc.favorito = true;\n          videojoc.active = 'active';\n        }\n      }\n    })();\n  }\n\n  loadDescription(videojoc) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const description = yield _this2.videojocsService.getDescripcion(videojoc.id);\n      videojoc.description = description.description; // Hacer que los elementos html de la descripcion sean interpretados como html\n\n      videojoc.description = videojoc.description.replace(/<\\/?[^>]+(>|$)/g, \"\");\n      console.log(description.description);\n    })();\n  }\n\n  mostrarInfoJuego(videojoc) {// Abrir una ventana emergente con la informacion del videojocs\n  }\n\n  addFavorito(videojoc) {\n    // Guardar en localStorage el id y el nombre del videojocs, si ya existe quitarlo\n    const favoritos = localStorage.getItem('favoritos');\n    let favoritosArray = [];\n\n    if (favoritos) {\n      favoritosArray = JSON.parse(favoritos);\n    }\n\n    const existe = favoritosArray.find(favorito => favorito.id === videojoc.id);\n\n    if (existe) {\n      const index = favoritosArray.indexOf(existe);\n      favoritosArray.splice(index, 1);\n    } else {\n      favoritosArray.push(videojoc);\n    }\n\n    localStorage.setItem('favoritos', JSON.stringify(favoritosArray));\n  }\n\n  toggle(index) {\n    this.listaVideojocs[index].active = this.listaVideojocs[index].active === 'active' ? 'inactive' : 'active';\n  }\n\n}\n\nVidejocsInfoComponent.ɵfac = function VidejocsInfoComponent_Factory(t) {\n  return new (t || VidejocsInfoComponent)(i0.ɵɵdirectiveInject(i1.VideojocsService));\n};\n\nVidejocsInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: VidejocsInfoComponent,\n  selectors: [[\"app-videjocs-info\"]],\n  decls: 22,\n  vars: 12,\n  consts: [[1, \"info-videojocs\"], [1, \"info-videojocs-header\"], [1, \"info-videojocs-header-img\"], [\"alt\", \"\", 3, \"src\"], [1, \"info-videojocs-header-info\"], [1, \"info-videojocs-body\"], [1, \"info-videojocs-body-info\"], [4, \"ngFor\", \"ngForOf\"], [\"step\", \"0.1\", 1, \"slider\", 3, \"value\", \"min\", \"max\", \"thumbLabel\", \"tickInterval\", \"vertical\", \"disabled\"]],\n  template: function VidejocsInfoComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelement(3, \"img\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 4);\n      i0.ɵɵelementStart(5, \"h1\");\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"p\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 5);\n      i0.ɵɵelementStart(10, \"div\", 6);\n      i0.ɵɵelementStart(11, \"strong\");\n      i0.ɵɵtext(12, \"Generos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"ul\");\n      i0.ɵɵtemplate(14, VidejocsInfoComponent_li_14_Template, 2, 1, \"li\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"strong\");\n      i0.ɵɵtext(16, \"Temporadas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"ul\");\n      i0.ɵɵtemplate(18, VidejocsInfoComponent_li_18_Template, 2, 1, \"li\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"strong\");\n      i0.ɵɵtext(20, \"Rating\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"mat-slider\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"src\", ctx.videojoc.background_image, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.videojoc.name);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.videojoc.description);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.videojoc.genres);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.videojoc.seasons);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"value\", ctx.videojoc.rating)(\"min\", 0)(\"max\", 5)(\"thumbLabel\", true)(\"tickInterval\", 1)(\"vertical\", false)(\"disabled\", true);\n    }\n  },\n  directives: [i2.NgForOf, i3.MatSlider],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2aWRlam9jcy1pbmZvLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"sources":["C:/Users/mique/DAW2/M14/PROJECTE_ANGULAR/Videojocs/src/app/videojocs/videjocs-info/videjocs-info.component.ts"],"names":["i0","i1","i2","i3","VidejocsInfoComponent_li_14_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","genero_r2","$implicit","ɵɵadvance","ɵɵtextInterpolate1","name","VidejocsInfoComponent_li_18_Template","temporada_r3","VidejocsInfoComponent","constructor","videojocsService","listaVideojocs","listaFavoritos","favoritos","localStorage","getItem","length","JSON","parse","ngOnInit","loadVideojocs","videojocs","listarVideojocs","results","videojoc","loadDescription","favorito","find","id","active","description","getDescripcion","replace","console","log","mostrarInfoJuego","addFavorito","favoritosArray","existe","index","indexOf","splice","push","setItem","stringify","toggle","ɵfac","VidejocsInfoComponent_Factory","t","ɵɵdirectiveInject","VideojocsService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","VidejocsInfoComponent_Template","ɵɵelement","ɵɵtemplate","ɵɵpropertyInterpolate","background_image","ɵɵsanitizeUrl","ɵɵtextInterpolate","ɵɵproperty","genres","seasons","rating","directives","NgForOf","MatSlider","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/viodeojocs/services/videojocs.service\";\r\nimport * as i2 from \"@angular/common\";\r\nimport * as i3 from \"@angular/material/slider\";\r\nfunction VidejocsInfoComponent_li_14_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"li\");\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const genero_r2 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", genero_r2.name, \" \");\r\n} }\r\nfunction VidejocsInfoComponent_li_18_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"li\");\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const temporada_r3 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", temporada_r3.name, \" \");\r\n} }\r\nexport class VidejocsInfoComponent {\r\n    constructor(videojocsService) {\r\n        this.videojocsService = videojocsService;\r\n        this.listaVideojocs = [];\r\n    }\r\n    listaFavoritos() {\r\n        const favoritos = localStorage.getItem('favoritos');\r\n        if (favoritos) {\r\n            // Comprobar que el valor del localStorage tiene algo\r\n            if (favoritos.length > 0) {\r\n                return JSON.parse(favoritos);\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n    ngOnInit() {\r\n        this.loadVideojocs();\r\n    }\r\n    async loadVideojocs() {\r\n        const videojocs = await this.videojocsService.listarVideojocs();\r\n        this.listaVideojocs = videojocs.results;\r\n        for (const videojoc of this.listaVideojocs) {\r\n            this.loadDescription(videojoc);\r\n            const favorito = this.listaFavoritos().find(favorito => favorito.id === videojoc.id);\r\n            if (favorito) {\r\n                videojoc.favorito = true;\r\n                videojoc.active = 'active';\r\n            }\r\n        }\r\n    }\r\n    async loadDescription(videojoc) {\r\n        const description = await this.videojocsService.getDescripcion(videojoc.id);\r\n        videojoc.description = description.description;\r\n        // Hacer que los elementos html de la descripcion sean interpretados como html\r\n        videojoc.description = videojoc.description.replace(/<\\/?[^>]+(>|$)/g, \"\");\r\n        console.log(description.description);\r\n    }\r\n    mostrarInfoJuego(videojoc) {\r\n        // Abrir una ventana emergente con la informacion del videojocs\r\n    }\r\n    addFavorito(videojoc) {\r\n        // Guardar en localStorage el id y el nombre del videojocs, si ya existe quitarlo\r\n        const favoritos = localStorage.getItem('favoritos');\r\n        let favoritosArray = [];\r\n        if (favoritos) {\r\n            favoritosArray = JSON.parse(favoritos);\r\n        }\r\n        const existe = favoritosArray.find(favorito => favorito.id === videojoc.id);\r\n        if (existe) {\r\n            const index = favoritosArray.indexOf(existe);\r\n            favoritosArray.splice(index, 1);\r\n        }\r\n        else {\r\n            favoritosArray.push(videojoc);\r\n        }\r\n        localStorage.setItem('favoritos', JSON.stringify(favoritosArray));\r\n    }\r\n    toggle(index) {\r\n        this.listaVideojocs[index].active = (this.listaVideojocs[index].active) === 'active' ? 'inactive' : 'active';\r\n    }\r\n}\r\nVidejocsInfoComponent.ɵfac = function VidejocsInfoComponent_Factory(t) { return new (t || VidejocsInfoComponent)(i0.ɵɵdirectiveInject(i1.VideojocsService)); };\r\nVidejocsInfoComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: VidejocsInfoComponent, selectors: [[\"app-videjocs-info\"]], decls: 22, vars: 12, consts: [[1, \"info-videojocs\"], [1, \"info-videojocs-header\"], [1, \"info-videojocs-header-img\"], [\"alt\", \"\", 3, \"src\"], [1, \"info-videojocs-header-info\"], [1, \"info-videojocs-body\"], [1, \"info-videojocs-body-info\"], [4, \"ngFor\", \"ngForOf\"], [\"step\", \"0.1\", 1, \"slider\", 3, \"value\", \"min\", \"max\", \"thumbLabel\", \"tickInterval\", \"vertical\", \"disabled\"]], template: function VidejocsInfoComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵelement(3, \"img\", 3);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(4, \"div\", 4);\r\n        i0.ɵɵelementStart(5, \"h1\");\r\n        i0.ɵɵtext(6);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"p\");\r\n        i0.ɵɵtext(8);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(9, \"div\", 5);\r\n        i0.ɵɵelementStart(10, \"div\", 6);\r\n        i0.ɵɵelementStart(11, \"strong\");\r\n        i0.ɵɵtext(12, \"Generos\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(13, \"ul\");\r\n        i0.ɵɵtemplate(14, VidejocsInfoComponent_li_14_Template, 2, 1, \"li\", 7);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(15, \"strong\");\r\n        i0.ɵɵtext(16, \"Temporadas\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(17, \"ul\");\r\n        i0.ɵɵtemplate(18, VidejocsInfoComponent_li_18_Template, 2, 1, \"li\", 7);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(19, \"strong\");\r\n        i0.ɵɵtext(20, \"Rating\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(21, \"mat-slider\", 8);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.videojoc.background_image, i0.ɵɵsanitizeUrl);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵtextInterpolate(ctx.videojoc.name);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵtextInterpolate(ctx.videojoc.description);\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.videojoc.genres);\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.videojoc.seasons);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"value\", ctx.videojoc.rating)(\"min\", 0)(\"max\", 5)(\"thumbLabel\", true)(\"tickInterval\", 1)(\"vertical\", false)(\"disabled\", true);\r\n    } }, directives: [i2.NgForOf, i3.MatSlider], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2aWRlam9jcy1pbmZvLmNvbXBvbmVudC5jc3MifQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}